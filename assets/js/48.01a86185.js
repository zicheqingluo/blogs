(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{501:function(s,n,t){"use strict";t.r(n);var e=t(1),a=Object(e.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"ssh反向代理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ssh反向代理"}},[s._v("#")]),s._v(" ssh反向代理")]),s._v(" "),n("p",[n("strong",[s._v("适用场景")])]),s._v(" "),n("ul",[n("li",[s._v("内网服务器无法访问github，而本地电脑可以科学上网，故内网服务器发起的请求通过本地电脑代理访问。")]),s._v(" "),n("li",[s._v("跳板机，如只能访问内网某台机器，可以设置转发到其他内网机器的22端口进行登录。")])]),s._v(" "),n("p",[n("strong",[s._v("原理")])]),s._v(" "),n("ul",[n("li",[n("p",[s._v("在内网服务器上起一个端口，设置内网服务器访问外网的请求走这个端口进行代理")])]),s._v(" "),n("li",[n("p",[s._v("内网服务器代理端口的请求，全部转发到本地电脑的科学上网工具上。")])])]),s._v(" "),n("p",[n("strong",[s._v("实现")])]),s._v(" "),n("p",[s._v("通过ssh反向代理来完成上述需求，无需使用root权限。")]),s._v(" "),n("p",[s._v("如：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("ssh -p 8222 -qngfNTR 8888:localhost:8765 rd@10.33.5.83\n# 命令在client上执行，会在server上起一个8888端口，server上的服务代理到8888端口进行科学上网\n# 使用rd用户连接server(10.33.5.83)的8222(因服务器22端口无法直接访问，iptables将8222转发至22)端口，将server(10.33.5.83)的8888端口转发到client的8765端口，这样10.33.5.83通过设置代理到127.0.0.1的8888即可通过client的8765端口进行代理。\n-q: 静默模式，不显示任何警告或错误信息。\n-n: 不执行远程命令。\n-g: 允许远程主机连接到本地转发的端口。\n-f: 在后台运行SSH会话。\n-N: 不执行远程命令。\n-T: 不分配伪终端。\n-p: 指定ssh端口，不指定默认22\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("p",[s._v("在设置git代理即可")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("#git操作\n# 使用socks5代理git请求\ngit config --global https.proxy socks5://127.0.0.1:8888\n# 取消全局代理\ngit config --global --unset https.proxy \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h2",{attrs:{id:"参考"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[s._v("#")]),s._v(" 参考")]),s._v(" "),n("ul",[n("li",[s._v("[1]  "),n("a",{attrs:{href:"https://cloud.tencent.com/developer/article/1528395",target:"_blank",rel:"nofollow noopener noreferrer"}},[s._v("ssh反向代理"),n("OutboundLink")],1)]),s._v(" "),n("li",[s._v("[2]  "),n("a",{attrs:{href:"https://www.cnblogs.com/wudonghang/p/48f75dabdefb9500c842dfa456712653.html",target:"_blank",rel:"nofollow noopener noreferrer"}},[s._v("ssh使用正向代理-反向代理"),n("OutboundLink")],1)])])])}),[],!1,null,null,null);n.default=a.exports}}]);