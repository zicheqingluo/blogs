(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{494:function(e,t,a){"use strict";a.r(t);var s=a(1),n=Object(s.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h4",{attrs:{id:"连接etcd"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#连接etcd"}},[e._v("#")]),e._v(" 连接etcd")]),e._v(" "),t("p",[e._v("etcdctl默认链接127.0.0.1:2379,如需指定其他集群可通过以下命令")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("./etcdctl --endpoints=10.116.32.91:2379\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("h4",{attrs:{id:"查"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查"}},[e._v("#")]),e._v(" 查")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("./etcdctl get name\n./etcdctl get name --print-value-only  # 只打印值，不打印键\n./etcdctl get name1 name3      # 左开右闭，打印name1 name2的值\n./etcdctl get --prefix name     # 打印name开头的键\n./etcdctl get --prefix name --limit 3     # 只打印前三个\n /etcdctl --form-key name1 # 读取字典序大于或等于 name3 的key\n ./etcdctl get --rev=2 name    # 读取历史版本的key\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br")])]),t("h4",{attrs:{id:"增"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#增"}},[e._v("#")]),e._v(" 增")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("./etcdctl put name test\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("h4",{attrs:{id:"删"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删"}},[e._v("#")]),e._v(" 删")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("./etcdctl del name\n./etcdctl del name --prev-kv   # 删除时，执行一次get，显示键值对\n# 也可以和查一样删除一个区间、前缀匹配的key\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br")])]),t("h4",{attrs:{id:"租约"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#租约"}},[e._v("#")]),e._v(" 租约")]),e._v(" "),t("p",[e._v("租约是etcd v3 API的新特性，租约是有过期时间的，一个租约可绑定多个key，所以当多个key需要相同的过期时间时，将一个租约绑定多个key，即可通过控制一个租约的过期时间来控制多个key的过期时间。")]),e._v(" "),t("p",[e._v("反过来，当修改一个key的过期时间也会修改它绑定的租约。")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("./etcdctl lease grant 60  # 创建一个60秒的租约，会生成一个租约id\n$ etcdctl put /foo bar --lease=1234567890abcdef --if-version=1 # 给key绑定租约，需要给key重新赋值，并且3.5版本需要检查版本，如果版本不对也不能绑定\n./etcdctl lease revoke  租约id  # 删除租约id\n./etcdctl lease timetolive 租约id # 根据租约id查看租约过期时间\n./etcdctl lease timetolive --keys 租约id # 查看租约绑定的key\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br")])]),t("h4",{attrs:{id:"watch"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#watch"}},[e._v("#")]),e._v(" watch")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("./etcdctl watch 键    # watch 键，键的生命周期都可以观察的到\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])])])}),[],!1,null,null,null);t.default=n.exports}}]);