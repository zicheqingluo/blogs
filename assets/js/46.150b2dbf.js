(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{495:function(s,e,a){"use strict";a.r(e);var n=a(1),t=Object(n.a)({},(function(){var s=this,e=s._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"_6-0版本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6-0版本"}},[s._v("#")]),s._v(" 6.0版本")]),s._v(" "),e("p",[s._v("安装路径为："),e("code",[s._v("/usr/local/ffmpeg")])]),s._v(" "),e("p",[s._v("安装包路径为："),e("code",[s._v("mkdir ~/ffmpeg_sources")])]),s._v(" "),e("p",[e("strong",[s._v("以下为centos安装方式")])]),s._v(" "),e("h4",{attrs:{id:"安装依赖"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖"}},[s._v("#")]),s._v(" "),e("strong",[s._v("安装依赖")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("yum install autoconf automake bzip2 bzip2-devel cmake freetype-devel gcc gcc-c++ git libtool make pkgconfig zlib-devel -y\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h4",{attrs:{id:"升级yasm"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#升级yasm"}},[s._v("#")]),s._v(" "),e("strong",[s._v("升级yasm")])]),s._v(" "),e("p",[s._v("1.3.0为当前最新版")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("wget http://www.tortall.net/projects/yasm/releases/yasm-1.3.0.tar.gz\ntar -zxvf yasm-1.3.0.tar.gz\ncd yasm-1.3.0\n./configure\nmake && make install\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h4",{attrs:{id:"libx264"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#libx264"}},[s._v("#")]),s._v(" "),e("strong",[s._v("libx264")])]),s._v(" "),e("p",[s._v("H.264 video encoder. See the "),e("a",{attrs:{href:"https://trac.ffmpeg.org/wiki/Encode/H.264",target:"_blank",rel:"nofollow noopener noreferrer"}},[s._v("H.264 Encoding Guide"),e("OutboundLink")],1),s._v(" for more information and usage examples.\nH.264 视频编码器。有关详细信息和使用示例，请参阅 H.264 编码指南。")]),s._v(" "),e("p",[s._v("Requires "),e("code",[s._v("ffmpeg")]),s._v(" to be configured with "),e("code",[s._v("--enable-gpl")]),s._v(" "),e("code",[s._v("--enable-libx264")]),s._v(".\n需要使用 "),e("code",[s._v("ffmpeg")]),s._v(" 进行 "),e("code",[s._v("--enable-gpl")]),s._v(" "),e("code",[s._v("--enable-libx264")]),s._v(" 配置 。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('cd ~/ffmpeg_sources\ngit clone --branch stable --depth 1 https://code.videolan.org/videolan/x264.git\ncd x264\nPKG_CONFIG_PATH="/usr/local/ffmpeg/lib/pkgconfig"\n./configure --prefix="/usr/local/ffmpeg" --bindir="/usr/local/ffmpeg/bin" --enable-static --disable-asm\nmake -j\nmake install\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("h4",{attrs:{id:"ffmpeg"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ffmpeg"}},[s._v("#")]),s._v(" "),e("strong",[s._v("ffmpeg")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('cd ~/ffmpeg_sources\ncurl -O -L https://ffmpeg.org/releases/ffmpeg-snapshot.tar.bz2\ntar xjvf ffmpeg-snapshot.tar.bz2\ncd ffmpeg\nexport PATH=$PATH:/usr/local/ffmpeg/bin PKG_CONFIG_PATH="/usr/local/ffmpeg/lib/pkgconfig" \n./configure \\\n  --enable-shared \\\n  --prefix="/usr/local/ffmpeg" \\\n  --pkg-config-flags="--static" \\\n  --extra-cflags="-I/usr/local/ffmpeg/include" \\\n  --extra-ldflags="-L/usr/local/ffmpeg/lib" \\\n  --extra-libs=-lpthread \\\n  --extra-libs=-lm \\\n  --bindir="/usr/local/ffmpeg/bin" \\\n  --enable-libx264 \\\n  --enable-gpl \\\n  --enable-nonfree \n\nmake -j\nmake install\nhash -d ffmpeg\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br")])]),e("p",[s._v("也可以以http方式下载 "),e("a",{attrs:{href:"https://www.ffmpeg.org/releases/",target:"_blank",rel:"nofollow noopener noreferrer"}},[s._v("ffmpeg下载源"),e("OutboundLink")],1)]),s._v(" "),e("p",[s._v("如果需要ffmpeg支持更多编码器可参考"),e("a",{attrs:{href:"https://trac.ffmpeg.org/wiki/CompilationGuide/Centos",target:"_blank",rel:"nofollow noopener noreferrer"}},[s._v("centos编译安装ffmpeg"),e("OutboundLink")],1),s._v(" ，以下报错表示不支持此编码器需要重新编译编码器和ffmpeg:")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("Unknown encoder ‘h264‘ 表示不支持libx264\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h4",{attrs:{id:"修改环境变量"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#修改环境变量"}},[s._v("#")]),s._v(" "),e("strong",[s._v("修改环境变量")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("vim /etc/profile\nexport PATH=$PATH:/usr/local/ffmpeg/bin\nsource /etc/profile\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"_4-1版本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-1版本"}},[s._v("#")]),s._v(" 4.1版本")]),s._v(" "),e("p",[e("strong",[s._v("升级yasm")])]),s._v(" "),e("p",[s._v("参考6.0版本安装，依赖配置也相同。")]),s._v(" "),e("h4",{attrs:{id:"下载源码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#下载源码"}},[s._v("#")]),s._v(" "),e("strong",[s._v("下载源码")])]),s._v(" "),e("p",[e("a",{attrs:{href:"https://ffmpeg.org/releases/?C=N;O=D",target:"_blank",rel:"nofollow noopener noreferrer"}},[s._v("老版本下载地址"),e("OutboundLink")],1)]),s._v(" "),e("h4",{attrs:{id:"编译安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#编译安装"}},[s._v("#")]),s._v(" "),e("strong",[s._v("编译安装")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("./configure --prefix=/usr/local/ffmpeg --enable-shared --disable-static --disable-doc \nmake -j\nmake install\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h4",{attrs:{id:"修改环境变量-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#修改环境变量-2"}},[s._v("#")]),s._v(" "),e("strong",[s._v("修改环境变量")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("vim /etc/ld.so.conf\n#新增\n/usr/local/ffmpeg/lib/\n#保存\nldconfig\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])])])}),[],!1,null,null,null);e.default=t.exports}}]);