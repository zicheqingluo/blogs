(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{484:function(s,e,t){"use strict";t.r(e);var a=t(1),n=Object(a.a)({},(function(){var s=this,e=s._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("p",[s._v("以下操作基于ubuntu22.02演示")]),s._v(" "),e("h2",{attrs:{id:"安装wsl"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装wsl"}},[s._v("#")]),s._v(" 安装WSL")]),s._v(" "),e("p",[s._v("使用管理员权限打开powershell，执行以下命令")]),s._v(" "),e("ul",[e("li",[s._v("开启windows子系统功能")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ul",[e("li",[e("p",[s._v("WSL2")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("检查系统版本")]),s._v(" "),e("p",[s._v("如果只是安装WSL1此时可以重启电脑，如果需要安装WSL2，则需要检查版本，win10需要满足以下条件\nFor x64 systems: Version 1903 or later, with Build 18362.1049 or later.\n对于 x64 系统：版本 1903 或更高版本，内部版本 18362.1049 或更高版本。\nFor ARM64 systems: Version 2004 or later, with Build 19041 or later.\n对于 ARM64 系统：版本 2004 或更高版本，内部版本 19041 或更高版本。")])]),s._v(" "),e("li",[e("p",[s._v("启用虚拟机功能，wsl2依赖虚拟机，和wsl1运行机制不同")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ul",[e("li",[s._v("下载linux内核更新包")])]),s._v(" "),e("p",[e("a",{attrs:{href:"https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi",target:"_blank",rel:"nofollow noopener noreferrer"}},[s._v("点击下载并双击安装"),e("OutboundLink")],1)]),s._v(" "),e("ul",[e("li",[s._v("切换为wsl2")])]),s._v(" "),e("p",[e("code",[s._v("wsl --set-default-version 2")])])]),s._v(" "),e("li",[e("p",[s._v("下载linux发行版")]),s._v(" "),e("p",[e("a",{attrs:{href:"https://aka.ms/wslubuntu2204",target:"_blank",rel:"nofollow noopener noreferrer"}},[s._v("ubuntu22.04 下载后安装"),e("OutboundLink")],1)])])]),s._v(" "),e("h2",{attrs:{id:"升级wsl2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#升级wsl2"}},[s._v("#")]),s._v(" 升级WSL2")]),s._v(" "),e("p",[s._v("如果当时安装wsl安装的版本为1，则可升级为2")]),s._v(" "),e("p",[s._v("查看版本：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("在CMD执行命令查看WSL子系统版本，如果不是2或为空则为1\n>wsl -l -v\n  NAME      STATE           VERSION\n* Ubuntu    Running         2\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("升级WSL子系统到2")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("> 以下操作是从1升级到2的步骤\n> 以管理员身份打开powershell或cmd执行以下命令\ndism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart\n> 执行成功后重启电脑\n> wsl -l -v 查看当前子系统对应的版本\n> wsl --set-version <distribution name> <versionNumber>  修改为要升级的版本\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("h3",{attrs:{id:""}},[e("a",{staticClass:"header-anchor",attrs:{href:"#"}},[s._v("#")])]),s._v(" "),e("h2",{attrs:{id:"开机启动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#开机启动"}},[s._v("#")]),s._v(" 开机启动")]),s._v(" "),e("p",[s._v("在cmd中执行以下命令可启动ssh")]),s._v(" "),e("p",[e("code",[s._v("wsl -d Ubuntu-20.04 -u root -e /etc/init.d/ssh start")])]),s._v(" "),e("p",[s._v("将以上命令加入到windows计划任务中")]),s._v(" "),e("p",[s._v("右键此电脑-管理-计算机管理(本地)-系统工具-任务计划程序-任务计划程序库")]),s._v(" "),e("ul",[e("li",[s._v("右侧创建任务，勾选使用最高权限运行；")]),s._v(" "),e("li",[s._v("触发器：登陆时-当任何用户登陆时；")]),s._v(" "),e("li",[s._v("操作\n"),e("ul",[e("li",[s._v("程序或脚本："),e("code",[s._v("C:\\Windows\\System32\\wsl.exe")])]),s._v(" "),e("li",[s._v("添加参数： "),e("code",[s._v("-d Ubuntu-20.04 -u root -e /etc/init.d/ssh start")])])])])]),s._v(" "),e("h2",{attrs:{id:"参考"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[s._v("#")]),s._v(" 参考")]),s._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://learn.microsoft.com/en-us/windows/wsl/install-manual#download-using-powershell",target:"_blank",rel:"nofollow noopener noreferrer"}},[s._v("WSL Install"),e("OutboundLink")],1)])])])}),[],!1,null,null,null);e.default=n.exports}}]);