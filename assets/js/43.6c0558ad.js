(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{488:function(s,a,e){"use strict";e.r(a);var n=e(1),t=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"显卡驱动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#显卡驱动"}},[s._v("#")]),s._v(" 显卡驱动")]),s._v(" "),a("h3",{attrs:{id:"查看驱动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看驱动"}},[s._v("#")]),s._v(" 查看驱动")]),s._v(" "),a("p",[s._v("首先需要确认当前有无安装驱动，命令行执行"),a("code",[s._v("nvidia-smi")]),s._v(" ，会有如下图所示信息：")]),s._v(" "),a("p",[a("img",{attrs:{src:"%E8%8B%B1%E4%BC%9F%E8%BE%BEgpu%E7%8E%AF%E5%A2%83.assets/image-20230618160523004.png",alt:"image-20230618160523004"}})]),s._v(" "),a("p",[s._v("第一行显示了驱动版本及CUDA版本，CUDA版本能够向后兼容Driver版本，也就是说只要Driver版本满足CUDA要求的最低版本即可运行，所以Driver版本可以无脑升级到最新即可。")]),s._v(" "),a("h3",{attrs:{id:"下载安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#下载安装"}},[s._v("#")]),s._v(" 下载安装")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://www.nvidia.cn/Download/index.aspx?lang=cn",target:"_blank",rel:"nofollow noopener noreferrer"}},[s._v("N卡驱动下载"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("产品类型如何选？GeForce是消费级游戏显卡如RTX3060系列，执行"),a("code",[s._v("nvidia-smi")]),s._v(" 也应该看到了第三个框的信息NVIDIA GeForce RTX 3060 或NVIDIA A10，按需选择下载即可。不清楚系列的的可以多点几个看看产品家族也能找得到。")]),s._v(" "),a("h4",{attrs:{id:"windows"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#windows"}},[s._v("#")]),s._v(" "),a("strong",[s._v("windows")])]),s._v(" "),a("p",[s._v("windows 下载到桌面安装即可，安装时可选最小安装。")]),s._v(" "),a("p",[s._v("查看版本，也可使用"),a("code",[s._v("nvidia-smi")]),s._v("查看")]),s._v(" "),a("p",[s._v("桌面右键或右下角托盘打开英伟达控制面板，点击帮助->系统信息->组件")]),s._v(" "),a("p",[a("img",{attrs:{src:"%E8%8B%B1%E4%BC%9F%E8%BE%BEgpu%E7%8E%AF%E5%A2%83.assets/image-20230606224059757.png",alt:"image-20230606224059757"}})]),s._v(" "),a("h4",{attrs:{id:"wsl"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#wsl"}},[s._v("#")]),s._v(" "),a("strong",[s._v("WSL")])]),s._v(" "),a("p",[s._v("wsl子系统的驱动是在windows上装，windows装了之后在"),a("strong",[s._v("wsl2")]),s._v("上子系统是可以读取的到，不要在子系统里装。")]),s._v(" "),a("p",[s._v("显卡驱动在windows上安装exe驱动程序安装好好之后CMD执行"),a("code",[s._v("nvidia-smi")]),s._v("即可获得结果 ，子系统执行也可以正常得到这个显示")]),s._v(" "),a("p",[s._v("如果读取不到需要检查是不是"),a("strong",[s._v("wsl版本为1")]),s._v("。千万不要在执行"),a("code",[s._v("nvidia-smi")]),s._v(" 失败时根据提示安装nvidia-utils ，WSL上的linux提示不可尽信，有些操作在WSL上的linux和单纯linux系统操作不同。")]),s._v(" "),a("h4",{attrs:{id:"centos"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#centos"}},[s._v("#")]),s._v(" "),a("strong",[s._v("centos")])]),s._v(" "),a("p",[s._v("在下载驱动时，他会和windows不同的是需要选CUDA Toolkit版本，也就是"),a("code",[s._v("nvidia-smi")]),s._v("显示的CUDA，CUDA Toolkit版本如何选？那就看你使用的模型建议版本了，很多开源项目都标注了在什么版本下测试过，按需即可，或者就选all。")]),s._v(" "),a("p",[s._v("下载后执行以下命令安装")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("rpm -ivh nvidia-driver-local-repo-rhel7-515.105.01-1.0-1.x86_64.rpm #包名根据自己下载修改\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"验证"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#验证"}},[s._v("#")]),s._v(" 验证")]),s._v(" "),a("p",[s._v("执行"),a("code",[s._v("nvidia-smi")]),s._v("后可以对比之前的看NVIDIA-SMI后面的版本应该时要和刚才安装的包名里的版本一致。")]),s._v(" "),a("p",[s._v("如执行报错"),a("code",[s._v("Failed to initialize NVML: Driver/library version mismatch")]),s._v(",重启系统再执行。")]),s._v(" "),a("h2",{attrs:{id:"cuda-toolkit"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cuda-toolkit"}},[s._v("#")]),s._v(" CUDA Toolkit")]),s._v(" "),a("h3",{attrs:{id:"查看版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看版本"}},[s._v("#")]),s._v(" 查看版本")]),s._v(" "),a("p",[s._v("命令行执行"),a("code",[s._v("nvcc -V")]),s._v(" 命令，可得到如下输出，如果命令无法执行表示未安装CUDA Toolkit")]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("nvcc: NVIDIA (R) Cuda compiler driver\nCopyright (c) 2005-2021 NVIDIA Corporation\nBuilt on Wed_Jul_14_19:41:19_PDT_2021\nCuda compilation tools, release 11.4, V11.4.100\nBuild cuda_11.4.r11.4/compiler.30188945_0")]),s._v(" "),a("h3",{attrs:{id:"下载安装-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#下载安装-2"}},[s._v("#")]),s._v(" 下载安装")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://developer.nvidia.com/cuda-downloads?target_os=Windows&target_arch=x86_64&target_version=10&target_type=exe_local",target:"_blank",rel:"nofollow noopener noreferrer"}},[s._v("下载CUDA Toolkit"),a("OutboundLink")],1),s._v(", 一般显示的都是最新的版本，如果要下载历史版本，先把页面选项选择完，然后页面下方会出现"),a("a",{attrs:{href:"https://developer.nvidia.com/cuda-toolkit-archive",target:"_blank",rel:"nofollow noopener noreferrer"}},[s._v("Archive of Previous CUDA Releases"),a("OutboundLink")],1),s._v("  建议用aria2或curl多线程下载最高40Mbps")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://blog.csdn.net/mouse1598189/article/details/86695400",target:"_blank",rel:"nofollow noopener noreferrer"}},[s._v("CUDA Toolkit版本与CUDA显卡驱动版本对应关系"),a("OutboundLink")],1),s._v("，CUDA Toolkit版本向后兼容CUDA显卡驱动版本")]),s._v(" "),a("p",[s._v("根据自己版本不同进行选择，windows选windows，linux选linux具体的版本，WSL就选WSL2，因为只有2支持，默认安装的windows子系统是WSL1并不支持，不要去选linux，WSL不能用linux的。")]),s._v(" "),a("p",[s._v("本次linux系统使用rpm或deb安装")]),s._v(" "),a("p",[s._v("下载完成后根据页面提示安装即可，页面附带了命令。")]),s._v(" "),a("h3",{attrs:{id:"配置环境变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置环境变量"}},[s._v("#")]),s._v(" 配置环境变量")]),s._v(" "),a("h4",{attrs:{id:"linux-wsl"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#linux-wsl"}},[s._v("#")]),s._v(" "),a("strong",[s._v("linux&WSL")])]),s._v(" "),a("p",[s._v("以下环境变量建议在子用户的"),a("code",[s._v("~/.bashrc")]),s._v("里设置，不影响其他用户使用。但是注意安装cudnn时还是得改/etc/")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("export PATH=/usr/local/cuda-11.7/bin${PATH:+:${PATH}}\nexport LD_LIBRARY_PATH=/usr/local/cuda-11.7/lib64${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("配置完"),a("code",[s._v("source ~/.bashrc")]),s._v(" 生效")]),s._v(" "),a("h4",{attrs:{id:"windows-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#windows-2"}},[s._v("#")]),s._v(" "),a("strong",[s._v("windows")])]),s._v(" "),a("p",[s._v("windows10-右下角windows设置-系统-关于-右侧有高级系统设置-环境变量-系统变量-编辑path-新建")]),s._v(" "),a("p",[s._v("分别新建以下两条，"),a("strong",[s._v("注意把版本替换为自己的版本")]),s._v("，以下是默认路径安装")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v10.2\n\nC:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v10.2\\lib\\x64\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("em",[s._v("如果安装多个CUDA Tookit版本记得，使用哪个就把哪个版本的变量移动到最前面")])]),s._v(" "),a("h2",{attrs:{id:"cudnn"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cudnn"}},[s._v("#")]),s._v(" cuDNN")]),s._v(" "),a("h3",{attrs:{id:"查看版本-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看版本-2"}},[s._v("#")]),s._v(" 查看版本")]),s._v(" "),a("h4",{attrs:{id:"windows-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#windows-3"}},[s._v("#")]),s._v(" "),a("strong",[s._v("windows")])]),s._v(" "),a("p",[s._v("如果已安装的情况下可以通过以下方式查看：")]),s._v(" "),a("p",[s._v("打开"),a("code",[s._v("C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v10.2\\extras\\demo_suite")])]),s._v(" "),a("p",[s._v("在此路径下打开cmd或powershell,执行命令:")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(".\\bandwidthTest.exe\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("输出以下内容：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[CUDA Bandwidth Test] - Starting...\nRunning on...\n\n Device 0: NVIDIA GeForce RTX 3060\n Quick Mode\n\n Host to Device Bandwidth, 1 Device(s)\n PINNED Memory Transfers\n   Transfer Size (Bytes)        Bandwidth(MB/s)\n   33554432                     23405.5\n\n Device to Host Bandwidth, 1 Device(s)\n PINNED Memory Transfers\n   Transfer Size (Bytes)        Bandwidth(MB/s)\n   33554432                     25694.9\n\n Device to Device Bandwidth, 1 Device(s)\n PINNED Memory Transfers\n   Transfer Size (Bytes)        Bandwidth(MB/s)\n   33554432                     319042.9\n\nResult = PASS\n\nNOTE: The CUDA Samples are not meant for performance measurements. Results may vary when GPU Boost is enabled.\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br")])]),a("h3",{attrs:{id:"下载安装-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#下载安装-3"}},[s._v("#")]),s._v(" 下载安装")]),s._v(" "),a("p",[s._v("cuDNN版本依赖CUDA版本，按需选择即可。,需要注册账户，邮箱注册即可")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://developer.nvidia.com/rdp/cudnn-download",target:"_blank",rel:"nofollow noopener noreferrer"}},[s._v("下载cuDNN"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("a",{attrs:{href:"https://docs.nvidia.com/deeplearning/cudnn/install-guide/index.html",target:"_blank",rel:"nofollow noopener noreferrer"}},[s._v("cuDNN安装方法"),a("OutboundLink")],1)]),s._v(" "),a("h4",{attrs:{id:"windows-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#windows-4"}},[s._v("#")]),s._v(" "),a("strong",[s._v("windows")])]),s._v(" "),a("p",[s._v("cuDNN是zip包，解压可以看到bin、include、lib目录，打开"),a("code",[s._v("C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA")]),s._v(" 进入具体版本目录，将cuDNN的3个目录里面的文件复制进去(是文件不是复制目录)")]),s._v(" "),a("h4",{attrs:{id:"centos7-8"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#centos7-8"}},[s._v("#")]),s._v(" centos7.8")]),s._v(" "),a("p",[s._v("使用tar包安装")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("xz -d cudnn-linux-x86_64-8.9.2.26_cuda11-archive.tar.xz #先用xz解压\ntar xf cudnn-linux-x86_64-8.9.2.26_cuda11-archive.tar  # tar解压\n# 注意cuda软连接对应的是不是你期望的实际版本地址\n$ sudo cp cudnn-*-archive/include/cudnn*.h /usr/local/cuda/include \n$ sudo cp -P cudnn-*-archive/lib/libcudnn* /usr/local/cuda/lib64 \n$ sudo chmod a+r /usr/local/cuda/include/cudnn*.h /usr/local/cuda/lib64/libcudnn*\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])])])}),[],!1,null,null,null);a.default=t.exports}}]);